\documentclass[border=2mm]{standalone}
\usepackage{tikz}

\newcommand{\carpetholes}[4]{%
  \ifnum#4>0\relax
    \pgfmathsetmacro{\s}{#3/3}

   
    \pgfmathsetmacro{\hx}{#1 + \s}
    \pgfmathsetmacro{\hy}{#2 + \s} % Центр
    \fill[white] (\hx,\hy) rectangle ++(\s,\s);

    
    \foreach \ii in {0,1,2}{%
      \foreach \jj in {0,1,2}{% 
        \ifnum\ii=1\relax
          \ifnum\jj=1\relax
            % центр пропускаем
          \else
            \pgfmathsetmacro{\nx}{#1 + \ii*\s}
            \pgfmathsetmacro{\ny}{#2 + \jj*\s}
            \carpetholes{\nx}{\ny}{\s}{\numexpr#4-1\relax}%
          \fi
        \else
          \pgfmathsetmacro{\nx}{#1 + \ii*\s}
          \pgfmathsetmacro{\ny}{#2 + \jj*\s}
          \carpetholes{\nx}{\ny}{\s}{\numexpr#4-1\relax}%
        \fi
      }%
    }%
  \fi
}

\newcommand{\carpet}[4]{%
\fill[black](#1,#2) rectangle++(#3,#3);
\carpetholes{#1}{#2}{#3}{#4};
}

\begin{document}
\begin{tikzpicture}

  \def\S{6}
  \def\gap{1.2}

  \foreach \d in {0,1,2,3,,4,5}{%
  \pgfmathtruncatemacro{\col}{mod(\d,2)}
  \pgfmathtruncatemacro{\row}{int(\d/2)}
  \pgfmathsetmacro{\xshift}{\col*(\S+\gap)}
  \pgfmathsetmacro{\yshift}{-\row*(\S+\gap)}
  

  \begin{scope}[shift={(\xshift,\yshift)}]
    \draw[gray] (0,0) rectangle (\S,\S);
    \carpet{0}{0}{\S}{\d}
    \node[anchor=north west] at (0,\S) {\small depth = \d};
  \end{scope}
}

\end{tikzpicture}
\end{document}